<!DOCTYPE html>
<html data-theme="cupcake">


<head>
  <title>
    SBAY | Cập nhật combo
  </title>
  <meta name="author" content="Chung Le Ba">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel='stylesheet' href='/stylesheets/style.css' />
  <link href="https://cdn.jsdelivr.net/npm/daisyui@3.0.20/dist/full.css" rel="stylesheet" type="text/css" />
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            clifford: '#da373d',
          }
        }
      }
    }
  </script>
  <script src="https://cdn.tiny.cloud/1/rso5ni3wc631ahu7iz5tgtsmk8mldtbk0d2rmct3ayz593bj/tinymce/6/tinymce.min.js"
    referrerpolicy="origin"></script>
  <script>tinymce.init({ selector: 'textarea' });</script>
</head>

<body>


  <section class="bg-gray-50 dark:bg-gray-900">
    <div class="flex flex-col px-6 py-8 mx-auto h-full">
      <div class="grid grid-cols-12">
        <div class="col-span-8">
          <h1 class="text-center mb-5 text-2xl font-bold text-red-600 mt-5">Cập nhật combo</h1>

        </div>
        <div class="col-span-4 self-center text-end ...">
          <a href="/manager" class=" mt-3 mr-5 underline text-red-600">Về trang quản lý</a>
        </div>
      </div>
      <form action="/manager/update-combo/<%= data._id %>" method="post" enctype="multipart/form-data">
        <div class="grid grid-cols-12 gap-4 bg-slate-100 p-5 rounded-lg ">
          <div class="col-span-4 sticky top-0">
            <h2 class="text-xl mb-3 text-center">Thông tin combo</h2>
            <div class="space-y-2 md:space-y-6 bg-white p-5 rounded-lg">
              <div>
                <label for="ten-combo" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">1.Tên
                  combo:</label>
                <input type="text" name="name" id="ten-combo"
                  class="bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
                  placeholder="Combo 2N1Đ Đà Nẵng ..." value="<%= data.name %>" required="">
              </div>
              <div>
                <label for="location" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">2.Vị
                  trí:</label>
                <input type="text" name="location" id="location"
                  class="bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
                  placeholder="Đà Nẵng" value="<%= data.location %>" required="">
              </div>
              <div>
                <label for="code" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">3.Mã
                  combo:</label>
                <input type="text" name="code" id="code"
                  class="bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
                  placeholder="DN01" value="<%= data.code %>" required="">
              </div>
              <div>
                <label for="code" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">4.Thời
                  gian:</label>
                <input type="text" name="timeCombo" id="timelong"
                  class="bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
                  placeholder="2 ngày 3 đêm" value="<%= data.timeCombo %>" required="">
              </div>
              <div>
                <label for="code" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">5.Loại
                  giá:</label>
                <div class="form-control ml-2">
                  <div class="flex flex-row">
                    <label class="label cursor-pointer">
                      <input type="radio" name="priceType" onclick="showPrince()" class="radio checked:bg-red-500 mr-2"
                        value="1" <%=data.priceType==1 ? 'checked' : '' %> />
                      <span class="label-text">Giá cố định</span>
                    </label>
                    <div class="form-control ml-2">
                      <label class="label cursor-pointer">
                        <input type="radio" name="priceType" onclick="showPrince()"
                          class="radio checked:bg-green-500 mr-2" value="2" <%=data.priceType==2 ? 'checked' : '' %> />
                        <span class="label-text">Giá từ</span>
                      </label>
                    </div>
                    <div class="form-control ml-2 ">
                      <label class="label cursor-pointer">
                        <input type="radio" name="priceType" onclick="hiddenPrince()"
                          class="radio checked:bg-blue-500 mr-2" value="3" <%=data.priceType==3 ? 'checked' : '' %> />
                        <span class="label-text">Giá liên hệ</span>
                      </label>
                    </div>
                  </div>

                  <input type="number" name="price" id="price"
                    class="bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
                    placeholder="1000000" value="<%= data.price %>" required="">
                </div>


              </div>
            </div>
          </div>
          <!-- ... -->
          <div class="col-span-8">
            <h2 class="text-xl mb-3 text-center">Mô tả combo</h2>
            <textarea name="description"><%= data.description %></textarea>
            <label class="label cursor-pointer">
              <span class="label-text mt-3">Hình ảnh đính kèm (hãy thêm từ 6-20 hình ảnh)</span>
            </label>
            <input id="imgInp" type="file" name="images"
              class="file-input file-input-bordered file-input-xs w-full max-w-xs" accept="image/*"
              value="<%= data.images %>" multiple required/>
            <div id="imgPreview" class="grid grid-cols-6 gap-2 p-2 align-middle">
              <% for (let index=0; index < data.images.length; index++) { %>
                <img class="w-40 rounded-md self-center ..." src="/uploads/<%= data.images[index] %>" alt="">
                <% } %>
            </div>
            <button type="submit"
              class="mt-3 w-full text-white bg-red-600 hover:bg-primary-700 focus:ring-4 focus:outline-none focus:ring-primary-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800">Cập
              nhật
              Combo</button>
          </div>
        </div>
      </form>

    </div>
  </section>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
  <script>
    /*  */
    function readURL(input) {
      if (input.files) {
        var imagesPreview = $('#imgPreview');
        imagesPreview.empty(); // Xóa nội dung hiện tại
        $.each(input.files, function (i, file) {
          var reader = new FileReader();
          reader.onload = function (e) {
            var img = $('<img class="w-20 h-20">').attr('src', e.target.result);
            imagesPreview.append(img);
          }
          reader.readAsDataURL(file);
        });
      }
    }
    $("#imgInp").change(function () {
      readURL(this);
    });
    /*  */
    var e = document.getElementById('price')
    function showPrince() {
      e.style.display = "block";
    }
    function hiddenPrince() {
      e.style.display = "none";
    }
  </script>
</body>

</html>